# hi there from Xavier

[hekad]
maxprocs = 2

[ScampInput]
Name = "logging"
Listen = ":30100"
[ScampInput.handler.0]
Action = "Logger.info"
Type = "Logger"
Severity = 1


[StatAccumInput]

# Heka dashboard for internal metrics and time series graphs
[Dashboard]
type = "DashboardOutput"
address = ":4352"
ticker_interval = 15

[ESJsonEncoder]
index = "%{Type}-%{%Y.%m.%d}"
es_index_from_timestamp = true
type_name = "%{Type}"
    [ESJsonEncoder.field_mappings]
    Timestamp = "@timestamp"
    Severity = "level"

[ElasticSearchOutput]
message_matcher = "Logger == 'heka-scamp'"
server = "http://elasticsearch:9200" # TODO: this needs config injection
encoder = "ESJsonEncoder"
flush_interval = 50

# Debugging info
[RstEncoder]

[LogOutput]
message_matcher = "Logger == 'heka-scamp'"
encoder = "RstEncoder"